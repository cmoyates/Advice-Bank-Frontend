(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(48),r=n.n(i),o=(n(130),n(131),n(110)),s=n(15),l=n(25),u=n.n(l),j=n(37),d=n(224),b=n(196),h=n(77),O=n(225),p=n(106),x=n.n(p),g=n(1),f=function(e){var t=Object(s.g)(),n=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat("https://advice-bank-backend.herokuapp.com","/auth/google"),"_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"bgImage",children:Object(g.jsx)(d.a,{children:Object(g.jsxs)(b.a,{height:"100vh",alignItems:"start",justifyContent:"center",children:[Object(g.jsx)(h.a,{variant:"h1",padding:2,color:"white",children:Object(g.jsx)("b",{children:"Advice Bank"})}),Object(g.jsx)(O.a,{size:"large",variant:"outlined",style:{color:"white",borderColor:"white",marginLeft:"16px"},onClick:function(){n()},startIcon:Object(g.jsx)(x.a,{}),children:"Login with Google"}),Object(g.jsx)(O.a,{size:"medium",style:{color:"white",marginLeft:"10px"},onClick:function(){t.push("/dashboard")},children:"Continue without logging in"})]})})})},m=n(8),v=n(29),w=n(202),D=n(222),C=n(198),k=n(226),S=n(227),y=n(228),T=function(e){var t=null;if(e.post){var n=new Date(e.post.ts);t=n.getDate()===e.currentDate.getDate()?"today at ".concat(n.toLocaleTimeString()):"on ".concat(n.toLocaleDateString())}return e.post?Object(g.jsxs)(C.a,{fullWidth:!0,open:e.open,onClose:function(){return e.setDialogOpen(!1)},children:[Object(g.jsx)(k.a,{children:e.post.title}),Object(g.jsxs)(S.a,{style:{color:"#000000",paddingLeft:"20px",paddingRight:"20px",paddingBottom:"0px",paddingTop:"0px"},children:[Object(g.jsxs)("div",{children:["Posted by ",e.post.user_name]}),Object(g.jsxs)("div",{children:["Posted ",t]}),e.post.tags.length>0?Object(g.jsxs)("div",{children:["Tags: ",Object(g.jsx)(b.a,{direction:"row",paddingTop:"5px",spacing:1,children:e.post.tags.map((function(e,t){return Object(g.jsx)(O.a,{size:"small",variant:"outlined",children:e},t)}))})]}):null]}),Object(g.jsxs)(y.a,{padding:"20px",style:{color:"#000000"},children:['"',e.post.content,'"']})]}):null},L=n(218),P=n(229),W=n(230),I=function(e){var t=new Date(e.post.ts),n=t.getDate()===e.currentDate.getDate()?"".concat(t.toLocaleTimeString()," Today"):t.toLocaleDateString();return Object(g.jsxs)(P.a,{children:[Object(g.jsxs)(b.a,{direction:"row",alignItems:"center",justifyContent:"space-between",marginX:"20px",children:[Object(g.jsx)(h.a,{variant:"h4",marginTop:"10px",children:e.post.title}),Object(g.jsx)(b.a,{direction:"row",spacing:1,children:e.post.tags.map((function(t,n){return Object(g.jsx)(O.a,{variant:"outlined",size:"small",onClick:function(){e.addTag(t)},children:t},n)}))})]}),Object(g.jsxs)(h.a,{variant:"body2",marginLeft:"20px",textAlign:"left",children:[Object(g.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return console.log(e.post.user_name)},children:[e.post.user_name,": "]}),Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return console.log(t.toLocaleString())},children:n})]}),Object(g.jsx)(h.a,{marginX:"20px",marginY:"10px",textAlign:"left",style:{maxHeight:"100px",height:"100px",overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:4},children:e.post.content}),Object(g.jsx)(W.a,{children:Object(g.jsx)(b.a,{width:"100%",direction:"row",justifyContent:"end",alignItems:"center",children:Object(g.jsx)(O.a,{onClick:function(){e.handleShowDetails(e.post)},children:"Details"})})})]})},A=function(e){var t=Object(v.a)(),n=Object(w.a)(t.breakpoints.down("sm"));return Object(g.jsx)(L.a,{container:!0,padding:2,spacing:4,minHeight:"min-content",children:e.posts.map((function(t,a){return Object(g.jsx)(L.a,{item:!0,xs:n?12:6,children:Object(g.jsx)(I,{post:t,handleShowDetails:e.handleShowDetails,currentDate:e.currentDate,addTag:e.addTag})},a)}))})},_=n(49),M=n(206),B=n(208),F=n(209),R=n(214),z=n(203),E=n(113),H=n(204),U=n(217),J=n(219),N=n(205),X=n(207),G=function(e){return Object(g.jsx)(R.a,{open:e.open,anchorEl:e.anchorRef.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,children:function(t){var n=t.TransitionProps,a=t.placement;return Object(g.jsx)(z.a,Object(_.a)(Object(_.a)({},n),{},{style:{transformOrigin:"bottom-start"===a?"left top":"left bottom"},children:Object(g.jsx)(E.a,{children:Object(g.jsx)(H.a,{onClickAway:e.handleClose,children:Object(g.jsxs)(U.a,{autoFocusItem:e.open,id:"composition-menu","aria-labelledby":"composition-button",children:[Object(g.jsxs)(J.a,{onClick:e.handleLogout,children:[Object(g.jsx)(N.a,{children:Object(g.jsx)(M.a,{})}),Object(g.jsx)(X.a,{children:"Logout"})]}),void 0!==e.userPrivilege?Object(g.jsxs)("div",{children:[Object(g.jsxs)(J.a,{onClick:function(){console.log("Saved")},children:[Object(g.jsx)(N.a,{children:Object(g.jsx)(B.a,{})}),Object(g.jsx)(X.a,{children:"Saved"})]}),e.userPrivilege>1?Object(g.jsxs)(J.a,{onClick:function(){console.log("Manage Users")},children:[Object(g.jsx)(N.a,{children:Object(g.jsx)(F.a,{})}),Object(g.jsx)(X.a,{children:"Users"})]}):null]}):null]})})})}))}})},Y=n(215),K=n(231),q=n(220),Q=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(""),o=Object(m.a)(r,2),s=o[0],l=o[1];return Object(g.jsxs)("div",{style:{maxWidth:"100%",minWidth:"100%"},children:[Object(g.jsx)(Y.a,{id:"outlined-basic",label:"Tags",variant:"outlined",autoComplete:"off",fullWidth:e.fullWidth,value:c,error:Boolean(s),helperText:s,onBlur:function(){l("")},onChange:function(e){i(e.target.value),l("")},onKeyDown:function(t){var n;13===t.keyCode&&(0===c.length?l("Tags cannot be blank"):e.tags.has(c)?l("That tag has already been entered"):(n=c,e.setTags(e.tags.add(n)),i("")))}}),Object(g.jsx)(L.a,{container:!0,spacing:1,paddingTop:1,maxWidth:"100%",children:Array.from(e.tags).map((function(t,n){return Object(g.jsx)(L.a,{item:!0,children:Object(g.jsx)(q.a,{label:t,onDelete:function(){var n;n=t,e.tags.delete(n),e.setTags(new Set(e.tags))}})},n)}))})]})},V=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(""),o=Object(m.a)(r,2),s=o[0],l=o[1],d=Object(a.useState)(new Set),h=Object(m.a)(d,2),p=h[0],x=h[1];return Object(g.jsxs)(C.a,{open:e.open,onClose:function(){return e.setDialogOpen(!1)},fullWidth:!0,children:[Object(g.jsx)(k.a,{children:"Submit a Post"}),Object(g.jsx)(S.a,{children:Object(g.jsxs)(b.a,{spacing:2,paddingTop:1,children:[Object(g.jsx)(Y.a,{fullWidth:!0,id:"title",label:"Title",variant:"outlined",autoComplete:"off",value:c,onChange:function(e){i(e.target.value)}}),Object(g.jsx)(Y.a,{fullWidth:!0,id:"content",label:"Content",variant:"outlined",multiline:!0,rows:4,autoComplete:"off",value:s,onChange:function(e){l(e.target.value)}}),Object(g.jsx)(Q,{tags:p,setTags:x,fullWidth:!0})]})}),Object(g.jsx)(K.a,{children:Object(g.jsx)(O.a,{variant:"contained",onClick:Object(j.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setDialogOpen(!1),n=Array.from(p),a={user_id:1,user_name:e.username,user_img:"https://cdn.business2community.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640.png",title:c,content:s,tags:n},console.log(a),t.next=6,e.handleSubmitPost(a);case 6:i(""),l(""),x(new Set);case 9:case"end":return t.stop()}}),t)}))),children:"Submit"})})]})},Z=Object(a.createContext)(null),$=function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),c=n[0],i=n[1],r=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(window.location.href),e.next=3,fetch("".concat("https://advice-bank-backend.herokuapp.com","/getuser"),{credentials:"include",headers:{"Access-Control-Allow-Origin":window.location.href}});case 3:return t=e.sent,e.prev=4,e.next=7,t.json();case 7:n=e.sent,console.log(n),i(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r()}),[]),Object(g.jsx)(Z.Provider,{value:{userObject:c,setUserObject:i},children:e.children})},ee=n(5),te=n(212),ne=n(211),ae=n(213),ce=function(){var e=Object(a.useState)([null,null]),t=Object(m.a)(e,2),n=t[0],c=t[1],i=new Date;return Object(g.jsx)("div",{children:Object(g.jsx)(ne.b,{dateAdapter:te.a,children:Object(g.jsxs)(b.a,{spacing:1,children:[Object(g.jsx)(ae.a,{label:"From",shouldDisableDate:function(e){return null!==e&&(e.getTime()>i.getTime()||null!==n[1]&&e.getTime()>n[1].getTime())},value:n[0],onChange:function(e){null===e||void 0===e||e.setHours(0,0,0,0),c([e,n[1]])},renderInput:function(e){return Object(g.jsx)(Y.a,Object(_.a)(Object(_.a)({},e),{},{id:"Date",autoComplete:"off"}))}}),Object(g.jsx)(ae.a,{label:"To",shouldDisableDate:function(e){return null!==e&&(e.getTime()>i.getTime()||null!==n[0]&&e.getTime()<n[0].getTime())},value:n[1],onChange:function(e){null===e||void 0===e||e.setHours(0,0,0,0),c([n[0],e])},renderInput:function(e){return Object(g.jsx)(Y.a,Object(_.a)(Object(_.a)({},e),{},{id:"Date",autoComplete:"off"}))}})]})})})},ie=function(e){var t=Object(ee.a)(E.a)((function(){return{flex:1,paddingTop:30,flexDirection:"column",justifyContent:"start",alignItems:"center",display:e.isMedScreen?"none":"flex",maxWidth:"90vw"}}));return Object(g.jsx)(t,{children:Object(g.jsxs)(b.a,{direction:"column",justifyContent:"space-around",alignItems:"center",spacing:2,height:"100%",paddingX:4,maxWidth:e.maxWidth,children:[e.isLoggedIn&&void 0!==e.userPrivilege&&e.userPrivilege>0?Object(g.jsx)(O.a,{variant:"contained",onClick:function(){return e.setSubmitDialogOpen(!0)},children:"Post"}):null,Object(g.jsx)(Y.a,{id:"outlined-basic",label:"Content",variant:"outlined",autoComplete:"off",fullWidth:!0}),Object(g.jsx)(Q,{fullWidth:!0,tags:e.tags,setTags:e.setTags}),Object(g.jsx)(Y.a,{id:"outlined-basic",label:"Author",variant:"outlined",autoComplete:"off",fullWidth:!0}),Object(g.jsx)(ce,{}),Object(g.jsx)(O.a,{variant:"contained",children:"Search"})]})})},re=n(233),oe=n(234),se=n(232),le=n(221),ue=n(109),je=n.n(ue),de=function(e){return Object(g.jsx)(re.a,{position:"static",style:{flexShrink:0},children:Object(g.jsxs)(oe.a,{children:[e.isMedScreen?Object(g.jsx)(se.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(){e.setDrawerOpen(!0)},children:Object(g.jsx)(je.a,{})}):null,Object(g.jsx)(h.a,{variant:"h5",flexGrow:1,textAlign:"start",children:"Dashboard"}),e.userData?Object(g.jsxs)(b.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(g.jsx)(h.a,{children:e.userData.user_name}),Object(g.jsx)(se.a,{onClick:function(){e.setMenuOpen(!0)},children:Object(g.jsx)(le.a,{alt:e.userData.user_name,src:e.userData.user_img,ref:e.anchorRef})})]}):Object(g.jsx)(h.a,{children:"You are not logged in"})]})})},be=function(e){var t,n,c,i=Object(a.useContext)(Z),r=Boolean(i&&i.userObject),o=Object(v.a)(),l=Object(w.a)(o.breakpoints.down("md")),d=Object(s.g)(),b=Object(a.useRef)(null),h=Object(a.useState)(!1),O=Object(m.a)(h,2),p=O[0],x=O[1],f=Object(a.useState)(!1),C=Object(m.a)(f,2),k=C[0],S=C[1],y=Object(a.useState)(!1),L=Object(m.a)(y,2),P=L[0],W=L[1],I=Object(a.useState)(!1),_=Object(m.a)(I,2),M=_[0],B=_[1],F=Object(a.useState)(null),R=Object(m.a)(F,2),z=R[0],E=R[1],H=Object(a.useState)(new Set),U=Object(m.a)(H,2),J=U[0],N=U[1],X=Object(a.useState)([]),Y=Object(m.a)(X,2),K=Y[0],q=Y[1],Q=new Date,$=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://advice-bank-backend.herokuapp.com","/posts/"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),q(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){document.title="Dashboard",$()}),[]);var ee=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://advice-bank-backend.herokuapp.com","/posts"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 2:return e.next=4,$();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://advice-bank-backend.herokuapp.com","/logout"),{credentials:"include",headers:{"Access-Control-Allow-Origin":window.location.href}});case 2:return t=e.sent,console.log(t),e.next=6,t.text();case 6:"done"===e.sent&&(null===i||void 0===i||i.setUserObject(null),d.push("/"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(de,{userData:null===i||void 0===i?void 0:i.userObject,isMedScreen:l,setDrawerOpen:B,setMenuOpen:W,anchorRef:b}),Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:"100%",flex:1,overflow:"auto"},children:[Object(g.jsx)(ie,{userPrivilege:null===i||void 0===i||null===(t=i.userObject)||void 0===t?void 0:t.user_privilege,isMedScreen:l,setSubmitDialogOpen:x,tags:J,setTags:N,isLoggedIn:r}),Object(g.jsx)("div",{style:{flex:3,display:"flex",flexDirection:"column",overflow:"auto",height:"100%"},children:Object(g.jsx)(A,{posts:K,handleShowDetails:function(e){E(e),S(!0)},currentDate:Q,addTag:function(e){N(new Set(J).add(e))}})})]}),Object(g.jsx)(V,{open:p,setDialogOpen:x,handleSubmitPost:ee,username:e.userData?e.userData.user_name:""}),Object(g.jsx)(T,{open:k,setDialogOpen:S,post:z,currentDate:Q}),Object(g.jsx)(G,{userPrivilege:null===i||void 0===i||null===(n=i.userObject)||void 0===n?void 0:n.user_privilege,open:P,anchorRef:b,handleClose:function(){W(!1)},handleLogout:te}),Object(g.jsx)(D.a,{anchor:"left",open:M&&l,onClose:function(){B(!1)},style:{width:"90vw",maxWidth:"90vw"},children:Object(g.jsx)(ie,{userPrivilege:null===i||void 0===i||null===(c=i.userObject)||void 0===c?void 0:c.user_privilege,isMedScreen:!l,setSubmitDialogOpen:x,tags:J,setTags:N,isLoggedIn:r})})]})},he=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("h1",{children:"404 no."})})},Oe=n(22),pe=n(111);var xe=function(){var e=Object(pe.a)(),t=Object(a.useContext)(Z);return Object(g.jsx)(Oe.c,{theme:e,children:Object(g.jsx)(o.a,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(s.d,{children:[Object(g.jsx)(s.b,{exact:!0,path:"/",component:function(){return t&&t.userObject?Object(g.jsx)(s.a,{to:"/dashboard"}):Object(g.jsx)(f,{})}}),Object(g.jsx)(s.b,{exact:!0,path:"/dashboard",component:function(){return Object(g.jsx)(be,{userData:(null===t||void 0===t?void 0:t.userObject)||null})}}),Object(g.jsx)(s.b,{exact:!0,path:"/404",component:function(){return Object(g.jsx)(he,{})}})]})})})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,235)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)($,{children:Object(g.jsx)(xe,{})})}),document.getElementById("root")),ge()}},[[143,1,2]]]);
//# sourceMappingURL=main.c15c712a.chunk.js.map